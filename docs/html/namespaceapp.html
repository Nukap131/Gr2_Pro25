<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ventilationsprojekt - Model A: app Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ventilationsprojekt - Model A<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">IoT system med MQTT, FastAPI, QuestDB og Streamlit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">app Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a06ea0d119ee97b7ad56c7adfadad9297"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a06ea0d119ee97b7ad56c7adfadad9297">load</a> ()</td></tr>
<tr class="separator:a06ea0d119ee97b7ad56c7adfadad9297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6924c2868fb3387662c5a092fa5753d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#ae6924c2868fb3387662c5a092fa5753d">plot_col</a> (name, <a class="el" href="namespaceapp.html#a61d300bbfa7ecfc1ea9e7338c605e97a">label</a>, <a class="el" href="namespaceapp.html#ab8f821f2d2c3bc44befd92693c69af62">yrange</a>, <a class="el" href="namespaceapp.html#a37383201a3e85704ebc68f0e4ca2030d">alarm</a>=None, <a class="el" href="namespaceapp.html#a14e98c2219a9d9e5c3d88402f7e8c84b">alarm_type</a>=&quot;high&quot;)</td></tr>
<tr class="separator:ae6924c2868fb3387662c5a092fa5753d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a884fd4d09ca9554dcf7342873cfe19ee"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a884fd4d09ca9554dcf7342873cfe19ee">log</a> = logging.getLogger(&quot;dashboard&quot;)</td></tr>
<tr class="separator:a884fd4d09ca9554dcf7342873cfe19ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9daeeab68a199c26272835281e0fefeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a9daeeab68a199c26272835281e0fefeb">fh</a> = logging.FileHandler(&quot;/var/<a class="el" href="namespaceapp.html#a884fd4d09ca9554dcf7342873cfe19ee">log</a>/dashboard/dashboard.log&quot;)</td></tr>
<tr class="separator:a9daeeab68a199c26272835281e0fefeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5014b5f50aacbbece717a6975e3067aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a5014b5f50aacbbece717a6975e3067aa">ch</a> = logging.StreamHandler()</td></tr>
<tr class="separator:a5014b5f50aacbbece717a6975e3067aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006a1def11f722fe9d886f9d5cbf1497"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a006a1def11f722fe9d886f9d5cbf1497">fmt</a> = logging.Formatter(&quot;%(asctime)s [%(levelname)s] %(message)s&quot;)</td></tr>
<tr class="separator:a006a1def11f722fe9d886f9d5cbf1497"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a244db0c6093eef8226d9b4ff4347514a"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a244db0c6093eef8226d9b4ff4347514a">API_URL</a> = &quot;http://fastapi-api:8000/maalinger?limit=500&quot;</td></tr>
<tr class="separator:a244db0c6093eef8226d9b4ff4347514a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2490d7d3619f325ca1e06943f86a239"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#aa2490d7d3619f325ca1e06943f86a239">df</a> = <a class="el" href="namespaceapp.html#a06ea0d119ee97b7ad56c7adfadad9297">load</a>()</td></tr>
<tr class="separator:aa2490d7d3619f325ca1e06943f86a239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a753f03fa02f5e08e094610a33d9afdd4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a753f03fa02f5e08e094610a33d9afdd4">latest</a> = df.iloc[-1]</td></tr>
<tr class="separator:a753f03fa02f5e08e094610a33d9afdd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a411ea567ac1ca0c5c461278144a7e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a7a411ea567ac1ca0c5c461278144a7e1">col1</a></td></tr>
<tr class="separator:a7a411ea567ac1ca0c5c461278144a7e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a5fda4e66a5b10cce19391f477e1298"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a5a5fda4e66a5b10cce19391f477e1298">col2</a></td></tr>
<tr class="separator:a5a5fda4e66a5b10cce19391f477e1298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6741c59d19870c5f024fd2337c49ce92"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a6741c59d19870c5f024fd2337c49ce92">col3</a></td></tr>
<tr class="separator:a6741c59d19870c5f024fd2337c49ce92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf27f1326cf69ed64cded734f20d2a5f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#abf27f1326cf69ed64cded734f20d2a5f">col4</a></td></tr>
<tr class="separator:abf27f1326cf69ed64cded734f20d2a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc53c344ccbd27f69061b23c2ae7618e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#afc53c344ccbd27f69061b23c2ae7618e">col5</a></td></tr>
<tr class="separator:afc53c344ccbd27f69061b23c2ae7618e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f821f2d2c3bc44befd92693c69af62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#ab8f821f2d2c3bc44befd92693c69af62">yrange</a></td></tr>
<tr class="separator:ab8f821f2d2c3bc44befd92693c69af62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37383201a3e85704ebc68f0e4ca2030d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a37383201a3e85704ebc68f0e4ca2030d">alarm</a></td></tr>
<tr class="separator:a37383201a3e85704ebc68f0e4ca2030d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14e98c2219a9d9e5c3d88402f7e8c84b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a14e98c2219a9d9e5c3d88402f7e8c84b">alarm_type</a></td></tr>
<tr class="separator:a14e98c2219a9d9e5c3d88402f7e8c84b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf6d5d7090f590bd29d5c7014f78aa0b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#acf6d5d7090f590bd29d5c7014f78aa0b">raw10</a> = df.tail(10).copy()</td></tr>
<tr class="separator:acf6d5d7090f590bd29d5c7014f78aa0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6ec6d110eec6a716a98ab68529c22c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a0c6ec6d110eec6a716a98ab68529c22c">use_container_width</a></td></tr>
<tr class="separator:a0c6ec6d110eec6a716a98ab68529c22c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f10ced59ad7dc46c2ade04be471adcc"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a1f10ced59ad7dc46c2ade04be471adcc">alarms</a> = []</td></tr>
<tr class="separator:a1f10ced59ad7dc46c2ade04be471adcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ee6eebe90c97f2de3cedcdffd5d13b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a17ee6eebe90c97f2de3cedcdffd5d13b">hist50</a> = df.tail(50)</td></tr>
<tr class="separator:a17ee6eebe90c97f2de3cedcdffd5d13b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89123356fcfdbd8322ba573b647cdb31"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a89123356fcfdbd8322ba573b647cdb31">csv</a> = df.to_csv(index=False).encode(&quot;utf-8&quot;)</td></tr>
<tr class="separator:a89123356fcfdbd8322ba573b647cdb31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d300bbfa7ecfc1ea9e7338c605e97a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a61d300bbfa7ecfc1ea9e7338c605e97a">label</a></td></tr>
<tr class="separator:a61d300bbfa7ecfc1ea9e7338c605e97a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac971a7ce28912f76a3248f427514f9d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#aac971a7ce28912f76a3248f427514f9d">data</a></td></tr>
<tr class="separator:aac971a7ce28912f76a3248f427514f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4923bd90236272961b9d694f9141d7c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a4923bd90236272961b9d694f9141d7c7">file_name</a></td></tr>
<tr class="separator:a4923bd90236272961b9d694f9141d7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905b735b3c06a871c71e7abebe969a24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a905b735b3c06a871c71e7abebe969a24">mime</a></td></tr>
<tr class="separator:a905b735b3c06a871c71e7abebe969a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f813b0b6c1a7de6bca61f330a7b987d"><td class="memItemLeft" align="right" valign="top">dictionary&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceapp.html#a1f813b0b6c1a7de6bca61f330a7b987d">alarm_counts</a></td></tr>
<tr class="separator:a1f813b0b6c1a7de6bca61f330a7b987d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a06ea0d119ee97b7ad56c7adfadad9297" name="a06ea0d119ee97b7ad56c7adfadad9297"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06ea0d119ee97b7ad56c7adfadad9297">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def app.load </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00045">45</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   45</span><span class="keyword">def </span><a class="code hl_function" href="namespaceapp.html#a06ea0d119ee97b7ad56c7adfadad9297">load</a>():</div>
<div class="line"><span class="lineno">   46</span>    log.info(f<span class="stringliteral">&quot;Henter data fra API: {API_URL}&quot;</span>)</div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">   49</span>        r = requests.get(API_URL)</div>
<div class="line"><span class="lineno">   50</span>        r.raise_for_status()</div>
<div class="line"><span class="lineno">   51</span>        df = pd.DataFrame(r.json())</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><span class="lineno">   53</span>        log.error(f<span class="stringliteral">&quot;Fejl ved API-kald: {e}&quot;</span>)</div>
<div class="line"><span class="lineno">   54</span>        st.error(<span class="stringliteral">&quot;❗ Fejl: Dashboardet kunne ikke hente data fra API.&quot;</span>)</div>
<div class="line"><span class="lineno">   55</span>        <span class="keywordflow">return</span> pd.DataFrame()</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>    df[<span class="stringliteral">&quot;timestamp&quot;</span>] = pd.to_datetime(df[<span class="stringliteral">&quot;timestamp&quot;</span>])</div>
<div class="line"><span class="lineno">   58</span>    log.info(f<span class="stringliteral">&quot;Indlæst {len(df)} målinger&quot;</span>)</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">return</span> df</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span> </div>
<div class="ttc" id="anamespaceapp_html_a06ea0d119ee97b7ad56c7adfadad9297"><div class="ttname"><a href="namespaceapp.html#a06ea0d119ee97b7ad56c7adfadad9297">app.load</a></div><div class="ttdeci">def load()</div><div class="ttdef"><b>Definition:</b> <a href="app_8py_source.html#l00045">app.py:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6924c2868fb3387662c5a092fa5753d" name="ae6924c2868fb3387662c5a092fa5753d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6924c2868fb3387662c5a092fa5753d">&#9670;&nbsp;</a></span>plot_col()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def app.plot_col </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>yrange</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>alarm</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>alarm_type</em> = <code>&quot;high&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00075">75</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   75</span><span class="keyword">def </span><a class="code hl_function" href="namespaceapp.html#ae6924c2868fb3387662c5a092fa5753d">plot_col</a>(name, label, yrange, alarm=None, alarm_type=&quot;high&quot;):</div>
<div class="line"><span class="lineno">   76</span> </div>
<div class="line"><span class="lineno">   77</span>    log.info(f<span class="stringliteral">&quot;Plotter graf: {name}, alarm={alarm}, type={alarm_type}&quot;</span>)</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    fig = px.line(df, x=<span class="stringliteral">&quot;timestamp&quot;</span>, y=name, title=label)</div>
<div class="line"><span class="lineno">   80</span>    fig.update_traces(mode=<span class="stringliteral">&quot;lines&quot;</span>, line=dict(width=2))</div>
<div class="line"><span class="lineno">   81</span>    fig.update_yaxes(range=yrange, autorange=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">if</span> alarm <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordflow">if</span> alarm_type == <span class="stringliteral">&quot;high&quot;</span>:</div>
<div class="line"><span class="lineno">   85</span>            overs = df[df[name] &gt; alarm]</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   87</span>            overs = df[df[name] &lt; alarm]</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>        <span class="keywordflow">if</span> len(overs) &gt; 0:</div>
<div class="line"><span class="lineno">   90</span>            log.info(f<span class="stringliteral">&quot;Alarm fundet for {name}: {len(overs)} punkter&quot;</span>)</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>            fig.add_scatter(</div>
<div class="line"><span class="lineno">   93</span>                x=overs[<span class="stringliteral">&quot;timestamp&quot;</span>],</div>
<div class="line"><span class="lineno">   94</span>                y=overs[name],</div>
<div class="line"><span class="lineno">   95</span>                mode=<span class="stringliteral">&quot;markers&quot;</span>,</div>
<div class="line"><span class="lineno">   96</span>                marker=dict(color=<span class="stringliteral">&quot;red&quot;</span>, size=10),</div>
<div class="line"><span class="lineno">   97</span>                name=<span class="stringliteral">&quot;Alarm&quot;</span></div>
<div class="line"><span class="lineno">   98</span>            )</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        fig.add_hline(</div>
<div class="line"><span class="lineno">  101</span>            y=alarm,</div>
<div class="line"><span class="lineno">  102</span>            line_dash=<span class="stringliteral">&quot;dash&quot;</span>,</div>
<div class="line"><span class="lineno">  103</span>            line_color=<span class="stringliteral">&quot;red&quot;</span>,</div>
<div class="line"><span class="lineno">  104</span>            annotation_text=<span class="stringliteral">&quot;Alarm&quot;</span>,</div>
<div class="line"><span class="lineno">  105</span>            annotation_position=<span class="stringliteral">&quot;top left&quot;</span>,</div>
<div class="line"><span class="lineno">  106</span>            annotation_font_color=<span class="stringliteral">&quot;red&quot;</span></div>
<div class="line"><span class="lineno">  107</span>        )</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    st.plotly_chart(fig, use_container_width=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span><span class="comment"># ==========================================================</span></div>
<div class="line"><span class="lineno">  113</span><span class="comment">#  KPI – seneste måling</span></div>
<div class="line"><span class="lineno">  114</span><span class="comment"># ==========================================================</span></div>
<div class="ttc" id="anamespaceapp_html_ae6924c2868fb3387662c5a092fa5753d"><div class="ttname"><a href="namespaceapp.html#ae6924c2868fb3387662c5a092fa5753d">app.plot_col</a></div><div class="ttdeci">def plot_col(name, label, yrange, alarm=None, alarm_type=&quot;high&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="app_8py_source.html#l00075">app.py:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a37383201a3e85704ebc68f0e4ca2030d" name="a37383201a3e85704ebc68f0e4ca2030d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37383201a3e85704ebc68f0e4ca2030d">&#9670;&nbsp;</a></span>alarm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.alarm</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00149">149</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a1f813b0b6c1a7de6bca61f330a7b987d" name="a1f813b0b6c1a7de6bca61f330a7b987d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f813b0b6c1a7de6bca61f330a7b987d">&#9670;&nbsp;</a></span>alarm_counts</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dictionary app.alarm_counts</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  {</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;udendoers_temp&quot;</span>: int((hist50[<span class="stringliteral">&quot;udendoers_temp&quot;</span>] &gt; 12).sum()),</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;rum_temp&quot;</span>: int((hist50[<span class="stringliteral">&quot;rum_temp&quot;</span>] &gt; 22).sum()),</div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;tilluft_temp&quot;</span>: int((hist50[<span class="stringliteral">&quot;tilluft_temp&quot;</span>] &gt; 14).sum()),</div>
<div class="line"><span class="lineno">    5</span>    <span class="stringliteral">&quot;effektforbrug&quot;</span>: int((hist50[<span class="stringliteral">&quot;effektforbrug&quot;</span>] &gt; 230).sum()),</div>
<div class="line"><span class="lineno">    6</span>    <span class="stringliteral">&quot;virkningsgrad&quot;</span>: int((hist50[<span class="stringliteral">&quot;virkningsgrad&quot;</span>] &lt; 76.2).sum()),</div>
<div class="line"><span class="lineno">    7</span>}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00219">219</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a14e98c2219a9d9e5c3d88402f7e8c84b" name="a14e98c2219a9d9e5c3d88402f7e8c84b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14e98c2219a9d9e5c3d88402f7e8c84b">&#9670;&nbsp;</a></span>alarm_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.alarm_type</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00149">149</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a1f10ced59ad7dc46c2ade04be471adcc" name="a1f10ced59ad7dc46c2ade04be471adcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f10ced59ad7dc46c2ade04be471adcc">&#9670;&nbsp;</a></span>alarms</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">list app.alarms = []</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00174">174</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a244db0c6093eef8226d9b4ff4347514a" name="a244db0c6093eef8226d9b4ff4347514a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a244db0c6093eef8226d9b4ff4347514a">&#9670;&nbsp;</a></span>API_URL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string app.API_URL = &quot;http://fastapi-api:8000/maalinger?limit=500&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00036">36</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a5014b5f50aacbbece717a6975e3067aa" name="a5014b5f50aacbbece717a6975e3067aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5014b5f50aacbbece717a6975e3067aa">&#9670;&nbsp;</a></span>ch</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.ch = logging.StreamHandler()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00019">19</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a7a411ea567ac1ca0c5c461278144a7e1" name="a7a411ea567ac1ca0c5c461278144a7e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a411ea567ac1ca0c5c461278144a7e1">&#9670;&nbsp;</a></span>col1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.col1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00118">118</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a5a5fda4e66a5b10cce19391f477e1298" name="a5a5fda4e66a5b10cce19391f477e1298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a5fda4e66a5b10cce19391f477e1298">&#9670;&nbsp;</a></span>col2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.col2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00118">118</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a6741c59d19870c5f024fd2337c49ce92" name="a6741c59d19870c5f024fd2337c49ce92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6741c59d19870c5f024fd2337c49ce92">&#9670;&nbsp;</a></span>col3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.col3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00118">118</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="abf27f1326cf69ed64cded734f20d2a5f" name="abf27f1326cf69ed64cded734f20d2a5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf27f1326cf69ed64cded734f20d2a5f">&#9670;&nbsp;</a></span>col4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.col4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00118">118</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="afc53c344ccbd27f69061b23c2ae7618e" name="afc53c344ccbd27f69061b23c2ae7618e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc53c344ccbd27f69061b23c2ae7618e">&#9670;&nbsp;</a></span>col5</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.col5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00118">118</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a89123356fcfdbd8322ba573b647cdb31" name="a89123356fcfdbd8322ba573b647cdb31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89123356fcfdbd8322ba573b647cdb31">&#9670;&nbsp;</a></span>csv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def app.csv = df.to_csv(index=False).encode(&quot;utf-8&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00202">202</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="aac971a7ce28912f76a3248f427514f9d" name="aac971a7ce28912f76a3248f427514f9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac971a7ce28912f76a3248f427514f9d">&#9670;&nbsp;</a></span>data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00208">208</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="aa2490d7d3619f325ca1e06943f86a239" name="aa2490d7d3619f325ca1e06943f86a239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2490d7d3619f325ca1e06943f86a239">&#9670;&nbsp;</a></span>df</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def app.df = <a class="el" href="namespaceapp.html#a06ea0d119ee97b7ad56c7adfadad9297">load</a>()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00063">63</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a9daeeab68a199c26272835281e0fefeb" name="a9daeeab68a199c26272835281e0fefeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9daeeab68a199c26272835281e0fefeb">&#9670;&nbsp;</a></span>fh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.fh = logging.FileHandler(&quot;/var/<a class="el" href="namespaceapp.html#a884fd4d09ca9554dcf7342873cfe19ee">log</a>/dashboard/dashboard.log&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00015">15</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a4923bd90236272961b9d694f9141d7c7" name="a4923bd90236272961b9d694f9141d7c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4923bd90236272961b9d694f9141d7c7">&#9670;&nbsp;</a></span>file_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.file_name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00209">209</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a006a1def11f722fe9d886f9d5cbf1497" name="a006a1def11f722fe9d886f9d5cbf1497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a006a1def11f722fe9d886f9d5cbf1497">&#9670;&nbsp;</a></span>fmt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.fmt = logging.Formatter(&quot;%(asctime)s [%(levelname)s] %(message)s&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00023">23</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a17ee6eebe90c97f2de3cedcdffd5d13b" name="a17ee6eebe90c97f2de3cedcdffd5d13b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17ee6eebe90c97f2de3cedcdffd5d13b">&#9670;&nbsp;</a></span>hist50</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def app.hist50 = df.tail(50)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00175">175</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a61d300bbfa7ecfc1ea9e7338c605e97a" name="a61d300bbfa7ecfc1ea9e7338c605e97a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61d300bbfa7ecfc1ea9e7338c605e97a">&#9670;&nbsp;</a></span>label</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.label</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00207">207</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a753f03fa02f5e08e094610a33d9afdd4" name="a753f03fa02f5e08e094610a33d9afdd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a753f03fa02f5e08e094610a33d9afdd4">&#9670;&nbsp;</a></span>latest</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def app.latest = df.iloc[-1]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00116">116</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a884fd4d09ca9554dcf7342873cfe19ee" name="a884fd4d09ca9554dcf7342873cfe19ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a884fd4d09ca9554dcf7342873cfe19ee">&#9670;&nbsp;</a></span>log</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.log = logging.getLogger(&quot;dashboard&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00011">11</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a905b735b3c06a871c71e7abebe969a24" name="a905b735b3c06a871c71e7abebe969a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a905b735b3c06a871c71e7abebe969a24">&#9670;&nbsp;</a></span>mime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.mime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00210">210</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="acf6d5d7090f590bd29d5c7014f78aa0b" name="acf6d5d7090f590bd29d5c7014f78aa0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf6d5d7090f590bd29d5c7014f78aa0b">&#9670;&nbsp;</a></span>raw10</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.raw10 = df.tail(10).copy()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00161">161</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="a0c6ec6d110eec6a716a98ab68529c22c" name="a0c6ec6d110eec6a716a98ab68529c22c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c6ec6d110eec6a716a98ab68529c22c">&#9670;&nbsp;</a></span>use_container_width</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.use_container_width</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00166">166</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
<a id="ab8f821f2d2c3bc44befd92693c69af62" name="ab8f821f2d2c3bc44befd92693c69af62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8f821f2d2c3bc44befd92693c69af62">&#9670;&nbsp;</a></span>yrange</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app.yrange</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="app_8py_source.html#l00149">149</a> of file <a class="el" href="app_8py_source.html">app.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
